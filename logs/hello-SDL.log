* 000000 [Engine] Log started at 2023/2/7 13:39:23
* 000000 [Engine] This copy of the engine is git hash 683cab3cde55985112f46049a17cbeeaadad4410, built on Jan 30 2023, at 14:33:27
* 000000 [Engine] Platform: Mac OS X
* 000000 [Engine] 
* 000000 [Engine] *******************************************************************************************
* 000000 [Engine] *** This is the Standard license build!                                                 ***
* 000000 [Engine] *** Get more with an Indie or Pro license such as C extensions, mobile dev, and VR dev! ***
* 000000 [Engine] *** Details at http://dragonruby.org/toolkit/game#purchase                              ***
* 000000 [Engine] *******************************************************************************************
* 000000 [Engine] 
! 000000 [Engine] Metadata file does not have all required fields!
- 000000 [Engine] Game Dir: /Users/justinlamb/repos/Plants dragonruby-macos//mygame
- 000000 [Engine] Game ID: hello-SDL
- 000000 [Engine] Game Title: Update metadata/game_metadata.txt in your mygame directory to change this title.
- 000000 [Engine] Game Version: 1.0
- 000000 [Engine] Game Package ID: org.dragonruby.hello-SDL
- 000000 [Engine] Game Developer ID: dragonruby
- 000000 [Engine] Game Developer Title: DragonRuby LLC
- 000000 [Engine] Production Build: no
- 000000 [Engine] Remote Hotload: no
? 000000 [Engine] Loading cvars from file 'metadata/cvars.txt' ...
? 000000 [Engine] File 'metadata/cvars.txt' line 1 setting cvar 'log.filter_subsystems' to 'HTTPServer'
? 000000 [Engine] File 'metadata/cvars.txt' complete
? 000000 [Engine] RNG seed has been set to 1675805964.
- 000000 [Engine] Janitor is using 4 threads.
? 000000 [Engine] Marked app/main.rb for reload. (-1)
? 000084 [Engine] Marked app/main.rb for reload. (5037)
- 000087 [Game] * WARNING:
Your average framerate dropped below 60 fps for two seconds.

The average FPS was 48.66666666666667.

** How To Disable Warning
If this warning is getting annoying put the following in your tick method:

#+begin_src
  args.gtk.log_level = :off
#+end_src

* INFO: Framerate Diagnostics
You can display these diagnostics using:

#+begin_src
  def tick args
    # ....

    # IMPORTANT: Put this at the END of the ~tick~ method.
    args.outputs.debug << args.gtk.framerate_diagnostics_primitives
  end
#+end_src

** Draw Calls: ~<<~ Invocation Perf Counter
Here is how many times ~args.outputs.PRIMITIVE_ARRAY <<~ was called:

  2 times invoked.

If the number above is high, consider batching primitives so you can lower the invocation of ~<<~. For example.

Instead of:

#+begin_src
  args.state.enemies.map do |e|
    e.alpha = 128
    args.outputs.sprites << e # <-- ~args.outputs.sprites <<~ is invoked a lot
  end
#+end_src

Do this:

#+begin_src
  args.outputs.sprites << args.state
                              .enemies
                              .map do |e| # <-- ~args.outputs.sprites <<~ is only invoked once.
    e.alpha = 128
    e
  end
#+end_src

** Array Primitives
~Primitives~ represented as an ~Array~ (~Tuple~) are great for prototyping, but are not as performant as using a ~Hash~.

Here is the number of ~Array~ primitives that were encountered:

  0 Array Primitives.

If the number above is high, consider converting them to hashes. For example.

Instead of:

#+begin_src
  args.outputs.sprites << [0, 0, 100, 100, 'sprites/enemy.png']
#+begin_end

Do this:

#+begin_src
  args.outputs.sprites << { x: 0,
                            y: 0,
                            w: 100,
                            h: 100,
                            path: 'sprites/enemy.png' }
#+begin_end

** Primitive Counts
Here are the draw counts ordered by lowest to highest z order:

PRIMITIVE   COUNT, STATIC COUNT
solids:     0, 0
sprites:    0, 0
primitives: 0, 0
labels:     1, 0
lines:      0, 0
borders:    0, 0
debug:      0, 0
reserved:   0, 0

** Additional Help
Come to the DragonRuby Discord channel if you need help troubleshooting performance issues. http://discord.dragonruby.org.

Source code for these diagnostics can be found at: [[https://github.com/dragonruby/dragonruby-game-toolkit-contrib/]]


? 000125 [Engine] Marked app/main.rb for reload. (7497)
- 000125 [Game] Game state and exception will be written to logs/exceptions/game_state_7498.txt and logs/exceptions/current.txt.
- 000125 [Game] * EXCEPTION:
* ERROR:
The solids property on outputs no longer supports
reassignment. Please use the << operator instead. Or if you need to
clear it use the .clear method instead.


** Backtrace:
*** app/main.rb:23:in tick
*** app/main.rb:21 (7500)
? 000139 [Engine] Marked app/main.rb for reload. (8337)
- 000142 [Game] * WARNING:
Your average framerate dropped below 60 fps for two seconds.

The average FPS was 8.588235294117647.

** How To Disable Warning
If this warning is getting annoying put the following in your tick method:

#+begin_src
  args.gtk.log_level = :off
#+end_src

* INFO: Framerate Diagnostics
You can display these diagnostics using:

#+begin_src
  def tick args
    # ....

    # IMPORTANT: Put this at the END of the ~tick~ method.
    args.outputs.debug << args.gtk.framerate_diagnostics_primitives
  end
#+end_src

** Draw Calls: ~<<~ Invocation Perf Counter
Here is how many times ~args.outputs.PRIMITIVE_ARRAY <<~ was called:

  3 times invoked.

If the number above is high, consider batching primitives so you can lower the invocation of ~<<~. For example.

Instead of:

#+begin_src
  args.state.enemies.map do |e|
    e.alpha = 128
    args.outputs.sprites << e # <-- ~args.outputs.sprites <<~ is invoked a lot
  end
#+end_src

Do this:

#+begin_src
  args.outputs.sprites << args.state
                              .enemies
                              .map do |e| # <-- ~args.outputs.sprites <<~ is only invoked once.
    e.alpha = 128
    e
  end
#+end_src

** Array Primitives
~Primitives~ represented as an ~Array~ (~Tuple~) are great for prototyping, but are not as performant as using a ~Hash~.

Here is the number of ~Array~ primitives that were encountered:

  1 Array Primitives.

If the number above is high, consider converting them to hashes. For example.

Instead of:

#+begin_src
  args.outputs.sprites << [0, 0, 100, 100, 'sprites/enemy.png']
#+begin_end

Do this:

#+begin_src
  args.outputs.sprites << { x: 0,
                            y: 0,
                            w: 100,
                            h: 100,
                            path: 'sprites/enemy.png' }
#+begin_end

** Primitive Counts
Here are the draw counts ordered by lowest to highest z order:

PRIMITIVE   COUNT, STATIC COUNT
solids:     1, 0
sprites:    0, 0
primitives: 0, 0
labels:     1, 0
lines:      0, 0
borders:    0, 0
debug:      0, 0
reserved:   0, 0

** Additional Help
Come to the DragonRuby Discord channel if you need help troubleshooting performance issues. http://discord.dragonruby.org.

Source code for these diagnostics can be found at: [[https://github.com/dragonruby/dragonruby-game-toolkit-contrib/]]


? 000148 [Engine] RNG seed has been set to 1675805964.
? 000172 [Engine] Marked app/main.rb for reload. (10317)
? 000179 [Engine] Marked app/main.rb for reload. (10737)
? 000185 [Engine] Marked app/main.rb for reload. (11097)
? 000225 [Engine] Marked app/main.rb for reload. (13497)
? 000227 [Engine] Marked app/main.rb for reload. (13617)
? 000253 [Engine] Marked app/main.rb for reload. (15177)
? 000264 [Engine] Marked app/main.rb for reload. (15837)
? 000269 [Engine] Marked app/main.rb for reload. (16137)
? 000279 [Engine] Marked app/main.rb for reload. (16676)
? 000283 [Engine] Marked app/main.rb for reload. (16900)
- 000283 [Game] Game state and exception will be written to logs/exceptions/game_state_8026.txt and logs/exceptions/current.txt.
- 000283 [Game] * EXCEPTION: 'background_color': wrong number of arguments (1 for 0)
** Backtrace:
*** app/main.rb:22:in tick
*** app/main.rb:21 (16903)
? 000283 [Engine] Marked app/main.rb for reload. (16943)
? 000293 [Engine] Marked app/main.rb for reload. (17423)
? 000298 [Engine] RNG seed has been set to 1675805964.
? 000322 [Engine] Marked app/main.rb for reload. (19137)
- 000322 [Game] Game state and exception will be written to logs/exceptions/game_state_1460.txt and logs/exceptions/current.txt.
- 000322 [Game] * EXCEPTION:
* ERROR:
The borders property on outputs no longer supports
reassignment. Please use the << operator instead. Or if you need to
clear it use the .clear method instead.


** Backtrace:
*** app/main.rb:22:in tick
*** app/main.rb:21 (19140)
? 000329 [Engine] Marked app/main.rb for reload. (19557)
? 000726 [Engine] Marked app/main.rb for reload. (43377)
? 000744 [Engine] Marked app/main.rb for reload. (44457)
? 000746 [Engine] Marked app/main.rb for reload. (44577)
? 000748 [Engine] Marked app/main.rb for reload. (44697)
- 000748 [Game] Game state and exception will be written to logs/exceptions/game_state_26597.txt and logs/exceptions/current.txt.
- 000748 [Game] * EXCEPTION:
* ERROR:
The static_borders property on outputs no longer supports
reassignment. Please use the << operator instead. Or if you need to
clear it use the .clear method instead.


** Backtrace:
*** app/main.rb:23:in tick
*** app/main.rb:21 (44700)
? 000753 [Engine] Marked app/main.rb for reload. (44997)
? 000759 [Engine] Marked app/main.rb for reload. (45357)
? 000766 [Engine] Marked app/main.rb for reload. (45777)
? 000826 [Engine] Marked app/main.rb for reload. (49377)
- 000829 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 23:37: syntax error, unexpected '}'



** Backtrace:
*** app/main.rb:21 (49557)
? 000834 [Engine] Marked app/main.rb for reload. (49856)
- 000837 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 23:48: syntax error, unexpected '}'



** Backtrace:
*** app/main.rb:21 (50036)
- 000842 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 23:57: syntax error, unexpected '}'



** Backtrace:
*** app/main.rb:21 (50336)
? 000843 [Engine] Marked app/main.rb for reload. (50395)
? 000845 [Engine] Marked app/main.rb for reload. (50515)
? 000860 [Engine] Marked app/main.rb for reload. (51415)
? 000866 [Engine] Marked app/main.rb for reload. (51775)
? 000874 [Engine] Marked app/main.rb for reload. (52255)
? 000884 [Engine] Marked app/main.rb for reload. (52854)
? 000892 [Engine] RNG seed has been set to 1675805964.
? 001310 [Engine] Marked app/main.rb for reload. (71938)
? 001316 [Engine] Marked app/main.rb for reload. (72080)
- 001316 [Game] * INFO: New methods discovered.
** :in_bounds

? 001326 [Engine] Marked app/main.rb for reload. (72347)
? 001336 [Engine] Marked app/main.rb for reload. (72611)
? 001346 [Engine] Marked app/main.rb for reload. (72876)
? 001349 [Engine] Marked app/main.rb for reload. (72960)
? 001358 [Engine] Marked app/main.rb for reload. (73163)
- 001368 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 37:34: syntax error, unexpected keyword_in
line 71:3: syntax error, unexpected keyword_end, expecting end of file



** Backtrace:
*** app/main.rb:28 (73427)
? 001371 [Engine] Marked app/main.rb for reload. (73487)
? 001378 [Engine] RNG seed has been set to 1675805964.
? 001407 [Engine] Marked app/main.rb for reload. (75464)
- 001477 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 30:63: syntax error, unexpected ',', expecting keyword_end



** Backtrace:
*** app/main.rb:28 (79664)
- 001478 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 30:63: syntax error, unexpected ',', expecting keyword_end



** Backtrace:
*** app/main.rb:28 (79723)
- 001482 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 30:63: syntax error, unexpected ',', expecting keyword_end



** Backtrace:
*** app/main.rb:28 (79962)
? 001492 [Engine] Marked app/main.rb for reload. (80560)
? 001499 [Engine] Marked app/main.rb for reload. (80980)
? 001502 [Engine] Marked app/main.rb for reload. (81160)
? 001505 [Engine] Marked app/main.rb for reload. (81340)
? 001507 [Engine] Marked app/main.rb for reload. (81460)
? 001509 [Engine] Marked app/main.rb for reload. (81580)
? 001528 [Engine] Marked app/main.rb for reload. (82660)
? 001530 [Engine] Marked app/main.rb for reload. (82740)
? 001536 [Engine] Marked app/main.rb for reload. (83002)
? 001545 [Engine] Marked app/main.rb for reload. (83438)
? 001553 [Engine] Marked app/main.rb for reload. (83757)
? 001573 [Engine] Marked app/main.rb for reload. (84558)
? 001579 [Engine] RNG seed has been set to 1675805964.
? 001602 [Engine] Marked app/main.rb for reload. (86161)
? 001714 [Engine] Marked app/main.rb for reload. (91801)
? 001720 [Engine] Marked app/main.rb for reload. (92004)
? 001742 [Engine] Marked app/main.rb for reload. (92749)
? 001749 [Engine] Marked app/main.rb for reload. (92952)
? 001752 [Engine] Marked app/main.rb for reload. (93036)
? 001769 [Engine] Marked app/main.rb for reload. (93539)
? 001796 [Engine] Marked app/main.rb for reload. (94283)
? 001804 [Engine] Marked app/main.rb for reload. (94496)
? 001813 [Engine] Marked app/main.rb for reload. (94706)
? 001819 [Engine] Marked app/main.rb for reload. (94857)
? 001822 [Engine] Marked app/main.rb for reload. (94942)
? 001826 [Engine] Marked app/main.rb for reload. (95029)
? 001845 [Engine] Marked app/main.rb for reload. (95477)
- 001846 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 78:3: syntax error, unexpected '}'



** Backtrace:
*** app/main.rb:28 (95503)
- 001851 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 78:3: syntax error, unexpected '}'



** Backtrace:
*** app/main.rb:28 (95623)
? 001860 [Engine] Marked app/main.rb for reload. (95803)
- 001864 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 78:1: syntax error, unexpected local variable or method, expecting '}'
line 79:1: syntax error, unexpected '}', expecting keyword_end



** Backtrace:
*** app/main.rb:28 (95897)
- 001867 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 78:1: syntax error, unexpected local variable or method, expecting '}'
line 79:1: syntax error, unexpected '}', expecting keyword_end



** Backtrace:
*** app/main.rb:28 (95957)
- 001872 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 78:1: syntax error, unexpected local variable or method, expecting '}'
line 78:20: syntax error, unexpected ',', expecting keyword_end



** Backtrace:
*** app/main.rb:28 (96077)
- 001884 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 78:1: syntax error, unexpected local variable or method, expecting '}'
line 78:20: syntax error, unexpected ',', expecting keyword_end
line 80:1: syntax error, unexpected '}', expecting keyword_end



** Backtrace:
*** app/main.rb:28 (96317)
- 001898 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 78:1: syntax error, unexpected local variable or method, expecting '}'
line 78:20: syntax error, unexpected ',', expecting keyword_end
line 79:39: syntax error, unexpected ',', expecting keyword_end



** Backtrace:
*** app/main.rb:28 (96617)
? 001909 [Engine] Marked app/main.rb for reload. (96857)
? 001918 [Engine] RNG seed has been set to 1675805964.
? 001982 [Engine] Marked app/main.rb for reload. (100987)
? 002014 [Engine] Marked app/main.rb for reload. (102606)
- 002018 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 85:0: syntax error, unexpected end of file, expecting keyword_end



** Backtrace:
*** app/main.rb:28 (102811)
? 002022 [Engine] Marked app/main.rb for reload. (102931)
? 002025 [Engine] Marked app/main.rb for reload. (103081)
? 002027 [Engine] Marked app/main.rb for reload. (103165)
? 002033 [Engine] Marked app/main.rb for reload. (103369)
- 002063 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 86:0: syntax error, unexpected end of file, expecting keyword_end



** Backtrace:
*** app/main.rb:28 (104472)
? 002068 [Engine] Marked app/main.rb for reload. (104652)
? 002069 [Engine] Marked app/main.rb for reload. (104685)
? 002080 [Engine] Marked app/main.rb for reload. (105045)
? 002119 [Engine] Marked app/main.rb for reload. (106213)
? 002120 [Engine] Marked app/main.rb for reload. (106243)
? 002123 [Engine] Marked app/main.rb for reload. (106303)
? 002137 [Engine] Marked app/main.rb for reload. (106694)
? 002147 [Engine] Marked app/main.rb for reload. (106961)
? 002158 [Engine] RNG seed has been set to 1675805964.
? 002218 [Engine] Marked app/main.rb for reload. (110877)
? 002225 [Engine] Marked app/main.rb for reload. (111297)
? 002228 [Engine] Marked app/main.rb for reload. (111474)
? 002229 [Engine] Marked app/main.rb for reload. (111525)
- 002233 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 64:8: syntax error, unexpected keyword_else



** Backtrace:
*** app/main.rb:28 (111705)
? 002239 [Engine] Marked app/main.rb for reload. (112005)
? 002242 [Engine] Marked app/main.rb for reload. (112152)
? 002245 [Engine] Marked app/main.rb for reload. (112298)
? 002255 [Engine] Marked app/main.rb for reload. (112799)
? 002271 [Engine] Marked app/main.rb for reload. (113482)
? 002307 [Engine] Marked app/main.rb for reload. (114828)
? 002310 [Engine] Marked app/main.rb for reload. (114917)
? 002330 [Engine] Marked app/main.rb for reload. (115550)
? 002333 [Engine] Marked app/main.rb for reload. (115642)
? 002334 [Engine] Marked app/main.rb for reload. (115669)
? 002340 [Engine] Marked app/main.rb for reload. (115849)
? 002355 [Engine] Marked app/main.rb for reload. (116303)
? 002379 [Engine] Marked app/main.rb for reload. (116932)
? 002391 [Engine] Marked app/main.rb for reload. (117263)
? 002395 [Engine] Marked app/main.rb for reload. (117357)
- 002477 [Game] * EXCEPTION:
** Failed to reload app/main.rb.
line 51:9: syntax error, unexpected keyword_end
line 92:0: syntax error, unexpected end of file, expecting keyword_end



** Backtrace:
*** app/main.rb:29 (119248)
? 002480 [Engine] Marked app/main.rb for reload. (119308)
? 002485 [Engine] Marked app/main.rb for reload. (119408)
? 002492 [Engine] Marked app/main.rb for reload. (119564)
? 002503 [Engine] Marked app/main.rb for reload. (119780)
? 002507 [Engine] Marked app/main.rb for reload. (119872)
? 002513 [Engine] RNG seed has been set to 1675805964.
? 002600 [Engine] Marked app/main.rb for reload. (125070)
? 002653 [Engine] Marked app/main.rb for reload. (127192)
? 002656 [Engine] Marked app/main.rb for reload. (127282)
? 002661 [Engine] RNG seed has been set to 1675805964.
? 002675 [Engine] Marked app/main.rb for reload. (128330)
? 002706 [Engine] Marked app/main.rb for reload. (130190)
? 002714 [Engine] Marked app/main.rb for reload. (130670)
- 002714 [Game] Game state and exception will be written to logs/exceptions/game_state_3228.txt and logs/exceptions/current.txt.
- 002714 [Game] * EXCEPTION:
* ERROR - :type method missing on ~Integer~.
The method
  :type
doesn't exist on 10.
** Backtrace:
*** app/main.rb:91:in tick
*** app/main.rb:29 (130673)
? 002725 [Engine] Marked app/main.rb for reload. (131330)
? 002732 [Engine] Marked app/main.rb for reload. (131749)
? 002778 [Engine] Marked app/main.rb for reload. (134029)
? 002780 [Engine] Marked app/main.rb for reload. (134113)
? 002783 [Engine] RNG seed has been set to 1675805964.
? 002804 [Engine] Marked app/main.rb for reload. (135530)
? 002847 [Engine] Marked app/main.rb for reload. (138110)
? 002854 [Engine] Marked app/main.rb for reload. (138530)
? 002861 [Engine] Marked app/main.rb for reload. (138878)
? 002863 [Engine] Marked app/main.rb for reload. (138959)
? 002863 [Engine] Marked app/main.rb for reload. (139002)
? 002896 [Engine] Marked app/main.rb for reload. (140442)
? 002921 [Engine] Marked app/main.rb for reload. (141370)
? 002922 [Engine] Marked app/main.rb for reload. (141400)
? 002960 [Engine] Marked app/main.rb for reload. (142600)
- 002971 [Game] Game state and exception will be written to logs/exceptions/game_state_8662.txt and logs/exceptions/current.txt.
- 002971 [Game] * EXCEPTION: can't convert Range to Integer
** Backtrace:
*** app/main.rb:52:in tick
*** app/main.rb:29 (142898)
? 002984 [Engine] Marked app/main.rb for reload. (143233)
? 002995 [Engine] RNG seed has been set to 1675805964.
? 003050 [Engine] Marked app/main.rb for reload. (146877)
